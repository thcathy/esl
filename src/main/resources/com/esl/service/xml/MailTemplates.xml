<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
       					   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
       					   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd">

	<!-- Java mail sender -->
	<bean id="mailService" class="com.esl.service.MailService">
		<property name="primaryMailAddress">
			<value>thcathy@gmail.com</value>
		</property>
		<property name="mailSender"><ref bean="mailSender"/></property>
		<property name="memberDAO" ref="memberDAO" />
		<property name="mailTemplates">
			<map>
				<entry key="forgetPassword_en"><value><![CDATA[
					<html>
					<meta http-equiv="content-type" content="text/html; charset=utf-8" />
					<body>
						<p>Dear #firstName#,</p>
						<p>Your account in Fun Fun Spell:</p>
						<p>Username: #userId#<br />Password: #PIN#</p>
						<p>To protect your password, please delete this email once you remember it.
							<br />This email is generated by Fun Fun Spell System, please do not reply.
							<br />If you would like to contact our staff, please use the "Contact Us" in our <a href="http://www.funfunspell.com/ESL/index.jsf" target="_blank">web site</a>.</p>
						<p>Regards,<br />Fun Fun Spell</p>
						<img src="http://static.funfunspell.com/images/graphic/logo.png" />
					</body>
					</html>
				]]></value></entry>
				
				<entry key="forgetPassword_zh"><value><![CDATA[
					<html>
					<meta http-equiv="content-type" content="text/html; charset=utf-8" />
					<body>
						<p>給 #firstName#:</p>
						<p>你的 Fun Fun Spell 帳號:</p>
						<p>用戶名稱: #userId#<br />密碼: #PIN#</p>
						<p>為保護你的密碼, 請於閱讀後立即刪除此電郵。
							<br />此電郵由Fun Fun Spell系統自動發出，請不要回覆。
							<br />如需聯絡本網站的人員，請使用<a href="http://www.funfunspell.com/ESL/index.jsf" target="_blank">網站內的"聯絡我們"</a>。</p>
						<p>Fun Fun Spell 啟</p>
						<img src="http://static.funfunspell.com/images/graphic/logo.png" />
					</body>
					</html>
				]]></value></entry>
			</map>
		</property>
	</bean>
	<bean id="mailSender"
		class="org.springframework.mail.javamail.JavaMailSenderImpl">
		<!-- 
		<property name="host" value="dsbxchsrv02a" />
		 -->		 
		<property name="host" value="${MailService.Host}" />
		<property name="port" value="${MailService.Port}" />			
		<property name="username" value="${MailService.Username}" />
		<property name="password" value="${MailService.Password}" />			
		<property name="javaMailProperties">
			<props>
				<prop key="mail.smtp.auth">true</prop>
				<prop key="mail.smtp.timeout">25000</prop>
				<prop key="mail.smtp.starttls.enable">true</prop>
				<prop key="mail.smtp.socketFactory.class">javax.net.ssl.SSLSocketFactory</prop>
				<prop key="mail.smtp.socketFactory.fallback">false</prop>
			</props>
		</property>
	</bean>  
    
</beans>
